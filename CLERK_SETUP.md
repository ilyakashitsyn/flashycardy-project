# Настройка Clerk для FlashyCardy

## Шаги настройки:

### 1. Создание проекта в Clerk
1. Перейдите на [clerk.com](https://clerk.com)
2. Создайте новый проект
3. Выберите Next.js как фреймворк

### 2. Получение ключей
После создания проекта получите:
- **Publishable Key** (начинается с `pk_test_` или `pk_live_`)
- **Secret Key** (начинается с `sk_test_` или `sk_live_`)

### 3. Настройка переменных окружения
Создайте файл `.env.local` в корне проекта:

```bash
# Clerk Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your_key_here
CLERK_SECRET_KEY=sk_test_your_key_here

# Database
DATABASE_URL=your_neon_database_url_here
```

### 4. Настройка доменов в Clerk
В настройках Clerk добавьте:
- `http://localhost:3000` (для разработки)
- Ваш продакшн домен (если есть)

### 5. Запуск приложения
```bash
npm run dev
```

### 6. Создание тестовых данных (опционально)
После первого входа в приложение, получите ваш Clerk userId и создайте тестовые данные:

```bash
# Установите переменную окружения
export CLERK_USER_ID=user_your_actual_id_here

# Запустите скрипт заполнения
npm run db:seed
```

## Функциональность:

- ✅ Аутентификация через Clerk
- ✅ Защищенные маршруты (/dashboard)
- ✅ Выпадающее меню пользователя
- ✅ Автоматическое перенаправление после входа
- ✅ Фильтрация колод по пользователю

## Примечания:

- Все API endpoints теперь защищены аутентификацией
- Колоды создаются только для авторизованных пользователей
- Middleware автоматически перенаправляет неавторизованных пользователей
