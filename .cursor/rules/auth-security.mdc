# Правила безопасности аутентификации

## Общие принципы

- Вся аутентификация обрабатывается через Clerk
- Пользователи могут получать доступ только к своим данным
- Никогда не доверяйте client-side данным без серверной проверки

## Структура файлов

- [middleware.ts](mdc:src/middleware.ts) - защищает все маршруты
- [db/schema.ts](mdc:src/db/schema.ts) - содержит схемы с user_id полями
- [db/index.ts](mdc:src/db/index.ts) - содержит функции доступа к БД

## Ключевые требования

1. Все API endpoints должны проверять аутентификацию
2. Все запросы к БД должны фильтроваться по user_id
3. Компоненты должны проверять права доступа перед рендерингом
4. Middleware должен блокировать неавторизованные запросы
   description:
   globs:
   alwaysApply: false

---
